---
import Layout from '../../layouts/Layout.astro';
import Markdown from '../../components/preview-markdown.astro';
import { getCollection } from 'astro:content';

export const components = {
  Markdown,
};

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const allFeatures = await getCollection("feature");
  return allFeatures.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

// 2. For your template, you can get the entry directly from the prop
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title="Discord Markdown">
  <div class="prose prose-invert">
    <h1>{entry.data.title}</h1>
    <Content components={components} />
  </div>
</Layout>
